import{h as G,i as J,k as K,l as X,m as Z,n as $,p as ee,r as te,x as ne,z as oe}from"./chunk-TDHQX2HT.js";import{Ab as j,Bb as z,Ha as l,Ia as b,Wa as g,_a as m,ab as a,ac as B,bb as i,bc as H,cb as I,cc as q,db as k,dc as Q,ea as F,eb as A,ec as U,gb as V,ib as x,jb as h,ma as u,na as f,nb as L,ob as c,pb as R,qb as P,rb as T,sb as C,tb as M,ub as D,wb as Y,yb as w,zb as W}from"./chunk-YCFRK6FC.js";var pe=Math.pow(10,8)*24*60*60*1e3,De=-pe;var me=3600;var re=me*24,ve=re*7,ue=re*365.2425,fe=ue/12,ye=fe*3,E=Symbol.for("constructDateFrom");function v(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&E in n?n[E](e):n instanceof Date?new n.constructor(e):new Date(e)}function p(n,e){return v(e||n,n)}function y(n,...e){let t=v.bind(null,n||e.find(o=>typeof o=="object"));return e.map(t)}function O(n,e){let t=+p(n)-+p(e);return t<0?-1:t>0?1:t}function ie(n,e,t){let[o,r]=y(t?.in,n,e),d=o.getFullYear()-r.getFullYear(),s=o.getMonth()-r.getMonth();return d*12+s}function ae(n,e){let t=p(n,e?.in);return t.setHours(23,59,59,999),t}function se(n,e){let t=p(n,e?.in),o=t.getMonth();return t.setFullYear(t.getFullYear(),o+1,0),t.setHours(23,59,59,999),t}function ce(n,e){let t=p(n,e?.in);return+ae(t,e)==+se(t,e)}function le(n,e,t){let[o,r,d]=y(t?.in,n,n,e),s=O(r,d),_=Math.abs(ie(r,d));if(_<1)return 0;r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-s*_);let N=O(r,d)===-s;ce(o)&&_===1&&O(o,d)===1&&(N=!1);let S=s*(_-+N);return S===0?0:S}var ge=n=>["/detalles",n],he=n=>["/proc-en-curso",n];function _e(n,e){if(n&1&&(a(0,"button",15),I(1,"i",16),c(2,"Ver Proc."),i()),n&2){let t=h(2).$implicit;m("routerLink",w(1,he,t.idproc_en_curso))}}function be(n,e){if(n&1&&(a(0,"tr")(1,"th",11),c(2),i(),a(3,"td")(4,"span",12),c(5),i()(),a(6,"td",13),c(7),W(8,"date"),i(),a(9,"td"),g(10,_e,3,3,"button",14),i(),a(11,"td"),c(12),i()()),n&2){let t=h().$implicit,o=h(),r=L(37);l(2),T("",t.proc_en_cursoTipoCompra,"",t.proc_en_cursoNumero,""),l(2),m("routerLink",w(12,ge,t.idproc_en_curso)),l(),P(" ",t.proc_en_cursoNombre,""),l(),m("ngClass",o.getClassForDate(t.proc_en_cursoFechaFin)),l(),P(" ",j(8,9,t.proc_en_cursoFechaFin,"yyyy-MM-dd")," "),l(3),m("ngIf",t.proc_en_cursoProcNuevo)("ngIfElse",r),l(2),R(t.proc_en_cursoObs)}}function xe(n,e){if(n&1&&(k(0),g(1,be,13,14,"tr",10),A()),n&2){let t=e.$implicit,o=h();l(),m("ngIf",!o.isDateAfter2000(t.proc_en_cursoFechaInicio))}}function Ce(n,e){n&1&&(a(0,"div")(1,"b")(2,"p"),c(3,"NO SE ENCONTRARON RESULTADOS PARA EL VALOR INGRESADO"),i()()())}function Me(n,e){n&1&&(a(0,"p"),c(1,"No hay proc."),i())}var de=class n{constructor(e,t,o){this.dataService=e;this.dialog=t;this.router=o}datos=[];datosFiltrados=[];filtro="";filtroNombre="";filtroObs="";linkProcNuevo=!1;noAdjudicado=!0;ngOnInit(){this.dataService.getDatos("vigentes").subscribe(e=>{this.datosFiltrados=e})}filtrarDatos(){this.datosFiltrados=this.datos.filter(e=>this.isDateAfter2000(e.fecha)&&this.isNameMatch(e.nombre,this.filtro))}filtrarDatosNombre(){this.datosFiltrados=this.datos.filter(e=>this.isDateAfter2000(e.fecha)&&this.isNameMatch(e.nombre,this.filtro))}filtrarDatosServicio(){this.datosFiltrados=this.datos.filter(e=>this.isDateAfter2000(e.fecha)&&this.isNameMatch(e.nombre,this.filtro))}isNameMatch(e,t){return e.toLowerCase().includes(t.toLowerCase())}isDateAfter2000(e){return new Date(e).getFullYear()<2e3}getClassForDate(e){let t=new Date(e),o=new Date,r=le(t,o);return o.getFullYear()-t.getFullYear()<2e3&&(this.noAdjudicado=!0),r<=0?"bg-black text-white":r>0&&r<=6?"bg-danger":r>6&&r<=12?"bg-warning":r>12&&r<=18?"bg-success text-white":"bg-white"}cambiarEstado(e){let t=0,o=!e.compras_vencimientosProcNuevo;e.compras_vencimientosProcNuevo=o,e.compras_vencimientosProcNuevo?(t=1,console.log("estadoEnvio:",t)):(t=0,console.log("estadoEnvio:",t)),this.dataService.actualizarEstado(e.idcompras_vencimientos,t).subscribe(r=>{console.log("Estado actualizado:",r)},r=>{console.error("Error al actualizar estado:",r),e.compras_vencimientosProcNuevo=!o})}ChequoEstadoProcNuevo(e){let t=e.compras_vencimientosProcNuevo;e.compras_vencimientosProcNuevo?this.linkProcNuevo=!0:this.linkProcNuevo=!1}static \u0275fac=function(t){return new(t||n)(b(Z),b(oe),b(G))};static \u0275cmp=F({type:n,selectors:[["app-dashboard"]],standalone:!0,features:[Y],decls:38,vars:5,consts:[["noProcesses",""],[1,"container"],[1,"row"],[1,"col-md-12"],[1,"table"],["scope","col"],[1,"input-container"],[1,"material-icons"],["type","text",1,"form-control",3,"ngModelChange","ngModel"],[4,"ngFor","ngForOf"],[4,"ngIf"],["scope","row"],[1,"link",3,"routerLink"],[3,"ngClass"],["class","btn-transparent",3,"routerLink",4,"ngIf","ngIfElse"],[1,"btn-transparent",3,"routerLink"],[1,"fa-regular","fa-eye","icono-separado"]],template:function(t,o){if(t&1){let r=V();I(0,"app-navbar"),a(1,"div",1)(2,"div",2)(3,"div",3)(4,"table",4)(5,"thead")(6,"tr")(7,"th",5),c(8,"Nro COMPRA"),i(),a(9,"th",5),c(10,"NOMBRE"),i(),a(11,"th",5),c(12,"FECHA VENC."),i(),a(13,"th",5),c(14,"PROC. EN CURSO"),i(),a(15,"th",5),c(16,"OBSERVACION"),i()()(),a(17,"tbody")(18,"tr")(19,"th",5)(20,"div",6)(21,"i",7),c(22,"search"),i(),a(23,"input",8),D("ngModelChange",function(s){return u(r),M(o.filtro,s)||(o.filtro=s),f(s)}),x("ngModelChange",function(){return u(r),f(o.filtrarDatos())}),i()()(),a(24,"th",5)(25,"div",6)(26,"i",7),c(27,"search"),i(),a(28,"input",8),D("ngModelChange",function(s){return u(r),M(o.filtroNombre,s)||(o.filtroNombre=s),f(s)}),x("ngModelChange",function(){return u(r),f(o.filtrarDatosNombre())}),i()()(),a(29,"th",5)(30,"div",6)(31,"i",7),c(32,"search"),i(),a(33,"input",8),D("ngModelChange",function(s){return u(r),M(o.filtroObs,s)||(o.filtroObs=s),f(s)}),x("ngModelChange",function(){return u(r),f(o.filtrarDatosServicio())}),i()()()(),g(34,xe,2,1,"ng-container",9),i()(),g(35,Ce,4,0,"div",10)(36,Me,2,0,"ng-template",null,0,z),i()()()}t&2&&(l(23),C("ngModel",o.filtro),l(5),C("ngModel",o.filtroNombre),l(5),C("ngModel",o.filtroObs),l(),m("ngForOf",o.datosFiltrados),l(),m("ngIf",o.datosFiltrados.length===0))},dependencies:[K,J,X,H,U,B,q,Q,ne,$,ee,te],styles:[".input-container[_ngcontent-%COMP%]{display:inline-flex;align-items:center;border:1px solid #ccc;border-radius:5px;padding:2px;width:100%}.input-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:0;color:#888}.input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;border:none;outline:none;padding:1px;font-size:16px}.bg-black[_ngcontent-%COMP%]{background-color:#0a0a0a!important}.bg-danger[_ngcontent-%COMP%]{background-color:#dc3545!important}.bg-warning[_ngcontent-%COMP%]{background-color:#ffc107!important}.bg-success[_ngcontent-%COMP%]{background-color:#28a745!important}.bg-white[_ngcontent-%COMP%]{background-color:#fff!important}.checkbox-cell[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:50px}.link[_ngcontent-%COMP%]{color:#00f;text-decoration:underline;cursor:pointer}.link[_ngcontent-%COMP%]:hover{text-decoration:none}.container[_ngcontent-%COMP%]{margin:100px auto auto}thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #999999;text-align:center;padding:8px;white-space:nowrap}thead[_ngcontent-%COMP%]{border-collapse:collapse}th[_ngcontent-%COMP%]{width:auto}.btn-transparent[_ngcontent-%COMP%]{background-color:transparent;border:none;color:#00f;text-decoration:underline;cursor:pointer;padding:0}.btn-transparent[_ngcontent-%COMP%]:hover{text-decoration:none}.icono-separado[_ngcontent-%COMP%]{margin-right:5px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:4px;text-align:left;vertical-align:middle}tr[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}"]})};export{de as DashboardComponent};
